<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Guesthouse Search</title>
  <style>
/* style.css */

/* 1) Load the Poppins font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

:root {
  --primary: #6C63FF;
  --primary-light: #8A85FF;
  --bg: #F5F7FA;
  --text: #333;
  --input-bg: #fff;
  --input-border: #DDD;
}

/* Global reset */
*, *::before, *::after {
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: var(--bg);
  color: var(--text);
  max-width: 600px;
  margin: 2rem auto;
  padding: 0 1rem;
  line-height: 1.6;
}

label {
  display: block;
  margin-top: 1.5rem;
  font-weight: 500;
  color: var(--primary);
}

select,
input {
  width: 100%;
  padding: 0.75rem 1rem;
  margin-top: 0.5rem;
  border: 1px solid var(--input-border);
  border-radius: 0.5rem;
  background-color: var(--input-bg);
  font-size: 1rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

select:focus,
input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
  outline: none;
}

button {
  display: inline-block;
  margin-top: 2rem;
  padding: 0.75rem 1.5rem;
  background-color: var(--primary);
  color: #fff;
  border: none;
  border-radius: 0.75rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  transition: background-color 0.2s ease, transform 0.1s ease;
}

button:hover {
  background-color: var(--primary-light);
}

button:active {
  transform: translateY(2px);
}

  </style>
  
</head>
<body>
  <h1>Find Your Guesthouse</h1>

  <form id="searchForm">
    <label>
      Island
      <select name="island" id="islandSelect" required>
        <option value="">Loading…</option>
      </select>
    </label>

    <label>
      Adults
      <select name="adults">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </label>

    <label>
      Kids
      <select name="kids">
        <option value="0" selected>0</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>
    </label>

    <label>
      Check-in
      <input type="date" name="checkin" required>
    </label>

    <label>
      Check-out
      <input type="date" name="checkout" required>
    </label>

    <button type="submit">Search</button>
  </form>

  <script>
    // 1) load guesthouse.json, extract unique islands
    fetch('../dhathuru/data/guesthouse.json')
      .then(r => r.json())
      .then(obj => {

        const hotels = obj.hotels || [];
        const islands = [...new Set(hotels.map(h => h.island))].sort();
        const sel = document.getElementById('islandSelect');
        sel.innerHTML = '<option value="">Select an island…</option>';
        islands.forEach(i => {
          const opt = document.createElement('option');
          opt.value = i;
          opt.textContent = i;
          sel.append(opt);
        });
      })
      .catch(err => {
        console.error(err);
        document.getElementById('islandSelect')
          .innerHTML = '<option value="">Error loading islands</option>';
      });

    // 2) on submit → serialize and redirect
    document.getElementById('searchForm')
      .addEventListener('submit', e => {
        e.preventDefault();
        const params = new URLSearchParams(new FormData(e.target));
        window.location.href = `results.html?${params.toString()}`;
      });
  </script>
</body>
</html>
